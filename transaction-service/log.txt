[INFO] Scanning for projects...
[INFO] 
[INFO] -------------< com.broome.micro.bank:transaction-service >--------------
[INFO] Building transaction-service 0.0.1-SNAPSHOT
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ transaction-service ---
[INFO] Deleting /Users/robin/tutorial/microbank/transaction-service/target
[INFO] 
[INFO] --- maven-resources-plugin:3.1.0:resources (default-resources) @ transaction-service ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.0:compile (default-compile) @ transaction-service ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 15 source files to /Users/robin/tutorial/microbank/transaction-service/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:3.1.0:testResources (default-testResources) @ transaction-service ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:3.8.0:testCompile (default-testCompile) @ transaction-service ---
[INFO] Changes detected - recompiling the module!
[INFO] Compiling 5 source files to /Users/robin/tutorial/microbank/transaction-service/target/test-classes
[INFO] 
[INFO] --- maven-surefire-plugin:2.22.1:test (default-test) @ transaction-service ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.broome.micro.bank.transactionservice.cucumber.TransactionCucumberIntegrationTest
14:08:32.054 [main] DEBUG org.springframework.test.context.BootstrapUtils - Instantiating TestContextBootstrapper for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions] from class [org.springframework.boot.test.context.SpringBootTestContextBootstrapper]
14:08:32.080 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions], using SpringBootContextLoader
14:08:32.085 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: class path resource [com/broome/micro/bank/transactionservice/cucumber/steps/TransactionStepDefinitions-context.xml] does not exist
14:08:32.085 [main] DEBUG org.springframework.test.context.support.AbstractContextLoader - Did not detect default resource location for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: class path resource [com/broome/micro/bank/transactionservice/cucumber/steps/TransactionStepDefinitionsContext.groovy] does not exist
14:08:32.086 [main] INFO org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: no resource found for suffixes {-context.xml, Context.groovy}.
14:08:32.087 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: TransactionStepDefinitions does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
14:08:32.190 [main] DEBUG org.springframework.test.context.support.ActiveProfilesUtils - Could not find an 'annotation declaring class' for annotation type [org.springframework.test.context.ActiveProfiles] and class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]
14:08:32.308 [main] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider - Identified candidate component class: file [/Users/robin/tutorial/microbank/transaction-service/target/classes/com/broome/micro/bank/transactionservice/TransactionServiceApplication.class]
14:08:32.310 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.broome.micro.bank.transactionservice.TransactionServiceApplication for test class com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions
14:08:32.466 [main] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - @TestExecutionListeners is not present for class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: using defaults.
14:08:32.467 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
14:08:32.505 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@7f8a9499, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5d43661b, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@12299890, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@2fba3fc4, org.springframework.test.context.support.DirtiesContextTestExecutionListener@4bf48f6, org.springframework.test.context.transaction.TransactionalTestExecutionListener@420a85c4, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1c39680d, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@62833051, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@1c852c0f, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@a37aefe, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5d99c6b5, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@266374ef]
14:08:32.581 [main] DEBUG org.springframework.test.context.support.TestPropertySourceUtils - Adding inlined properties to environment: {spring.jmx.enabled=false, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true, server.port=0}
2019-02-21 14:08:33.874  INFO 42987 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration' of type [org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration$$EnhancerBySpringCGLIB$$2e2270ec] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.1.2.RELEASE)

2019-02-21 14:08:34.411  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : No active profile set, falling back to default profiles: default
2019-02-21 14:08:35.787  INFO 42987 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data repositories in DEFAULT mode.
2019-02-21 14:08:35.974  INFO 42987 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 168ms. Found 1 repository interfaces.
2019-02-21 14:08:36.843  INFO 42987 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=a23743a7-99ee-3075-8b9d-12cdda2aceef
2019-02-21 14:08:37.922  INFO 42987 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$12086def] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-02-21 14:08:37.995  INFO 42987 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration' of type [org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration$$EnhancerBySpringCGLIB$$2e2270ec] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-02-21 14:08:38.666  INFO 42987 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)
2019-02-21 14:08:38.712  INFO 42987 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2019-02-21 14:08:38.712  INFO 42987 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.14]
2019-02-21 14:08:38.732  INFO 42987 --- [           main] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/Users/robin/Library/Java/Extensions:/Library/Java/Extensions:/Network/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java:.]
2019-02-21 14:08:39.005  INFO 42987 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2019-02-21 14:08:39.006  INFO 42987 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 4582 ms
2019-02-21 14:08:39.587  INFO 42987 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2019-02-21 14:08:39.917  INFO 42987 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2019-02-21 14:08:40.114  INFO 42987 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2019-02-21 14:08:40.263  INFO 42987 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {5.3.7.Final}
2019-02-21 14:08:40.265  INFO 42987 --- [           main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found
2019-02-21 14:08:40.350  INFO 42987 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
2019-02-21 14:08:40.576  INFO 42987 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2019-02-21 14:08:41.561  INFO 42987 --- [           main] o.h.t.schema.internal.SchemaCreatorImpl  : HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@563263a'
2019-02-21 14:08:41.566  INFO 42987 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2019-02-21 14:08:42.368  WARN 42987 --- [           main] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2019-02-21 14:08:42.368  INFO 42987 --- [           main] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2019-02-21 14:08:42.380  WARN 42987 --- [           main] c.n.c.sources.URLConfigurationSource     : No URLs will be polled as dynamic configuration sources.
2019-02-21 14:08:42.380  INFO 42987 --- [           main] c.n.c.sources.URLConfigurationSource     : To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2019-02-21 14:08:43.047  INFO 42987 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-02-21 14:08:43.143  WARN 42987 --- [           main] aWebConfiguration$JpaWebMvcConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2019-02-21 14:08:45.038  INFO 42987 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 50737 (http) with context path ''
2019-02-21 14:08:45.040  INFO 42987 --- [           main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 50737
2019-02-21 14:08:45.050  INFO 42987 --- [           main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2019-02-21 14:08:45.132  INFO 42987 --- [           main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2019-02-21 14:08:45.262  INFO 42987 --- [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using JSON encoding codec LegacyJacksonJson
2019-02-21 14:08:45.262  INFO 42987 --- [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using JSON decoding codec LegacyJacksonJson
2019-02-21 14:08:45.512  INFO 42987 --- [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using XML encoding codec XStreamXml
2019-02-21 14:08:45.512  INFO 42987 --- [           main] c.n.d.provider.DiscoveryJerseyProvider   : Using XML decoding codec XStreamXml
2019-02-21 14:08:45.852  INFO 42987 --- [           main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2019-02-21 14:08:45.896  INFO 42987 --- [           main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2019-02-21 14:08:45.897  INFO 42987 --- [           main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2019-02-21 14:08:45.897  INFO 42987 --- [           main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2019-02-21 14:08:45.897  INFO 42987 --- [           main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2019-02-21 14:08:45.897  INFO 42987 --- [           main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2019-02-21 14:08:45.897  INFO 42987 --- [           main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2019-02-21 14:08:45.897  INFO 42987 --- [           main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2019-02-21 14:08:46.260  INFO 42987 --- [           main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2019-02-21 14:08:46.264  INFO 42987 --- [           main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2019-02-21 14:08:46.269  INFO 42987 --- [           main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2019-02-21 14:08:46.275  INFO 42987 --- [           main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1550754526273 with initial instances count: 4
2019-02-21 14:08:46.285  INFO 42987 --- [           main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application TRANSACTION-SERVICE with eureka with status UP
2019-02-21 14:08:46.286  INFO 42987 --- [           main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1550754526286, current=UP, previous=STARTING]
2019-02-21 14:08:46.290  INFO 42987 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TRANSACTION-SERVICE/192.168.43.177:transaction-service:0: registering service...
2019-02-21 14:08:46.300  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : Started TransactionStepDefinitions in 13.713 seconds (JVM running for 15.439)
Feature: Transaction functionalites

  Scenario: System user asks for transactions                               # src/test/resources/features/transaction.feature:3
2019-02-21 14:08:46.361  INFO 42987 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TRANSACTION-SERVICE/192.168.43.177:transaction-service:0 - registration status: 204
2019-02-21 14:08:46.421  INFO 42987 --- [           main] o.h.h.i.QueryTranslatorFactoryInitiator  : HHH000397: Using ASTQueryTranslatorFactory
2019-02-21 14:08:46.654  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:46.656  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:46.734  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: COMMITTED
2019-02-21 14:08:46.734  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:46.738  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:46.742  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: COMMITTED
2019-02-21 14:08:46.742  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:46.743  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:46.747  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: COMMITTED
2019-02-21 14:08:46.749  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:46.749  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:46.752  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: COMMITTED
2019-02-21 14:08:46.753  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:46.753  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:46.757  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: COMMITTED
    Given that 5 transactions exists for account 1234 with status COMMITTED # TransactionStepDefinitions.that_transactions_exists_for_account_with_status(Integer,String,String)
2019-02-21 14:08:46.760  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:46.907  INFO 42987 --- [o-auto-1-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2019-02-21 14:08:46.907  INFO 42987 --- [o-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2019-02-21 14:08:46.951  INFO 42987 --- [o-auto-1-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 43 ms
2019-02-21 14:08:47.605  INFO 42987 --- [o-auto-1-exec-1] c.b.m.b.t.services.TransactionService    : Searching for transaction for account 1234
2019-02-21 14:08:47.652  INFO 42987 --- [o-auto-1-exec-1] c.b.m.b.t.services.TransactionService    : YFound 5 (5+0)transaction for account "1234"
    When system user asks for transaction for account 1234                  # TransactionStepDefinitions.system_user_asks_for_transaction_for_account(String)
2019-02-21 14:08:47.806  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:47.814  INFO 42987 --- [o-auto-1-exec-2] c.b.m.b.t.services.TransactionService    : Searching for transaction for account 1234
2019-02-21 14:08:47.819  INFO 42987 --- [o-auto-1-exec-2] c.b.m.b.t.services.TransactionService    : YFound 5 (5+0)transaction for account "1234"
    Then 5 transactions exists for account 1234                             # TransactionStepDefinitions.transactions_exists_for_account(Integer,String)
2019-02-21 14:08:47.829  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions], using SpringBootContextLoader
2019-02-21 14:08:47.831  INFO 42987 --- [           main] o.s.t.c.support.AbstractContextLoader    : Could not detect default resource locations for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: no resource found for suffixes {-context.xml, Context.groovy}.
2019-02-21 14:08:47.832  INFO 42987 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: TransactionStepDefinitions does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2019-02-21 14:08:47.835  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.broome.micro.bank.transactionservice.TransactionServiceApplication for test class com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions
2019-02-21 14:08:47.838  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2019-02-21 14:08:47.838  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@8de4206, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@10f384a2, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@57fae911, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@52a0bc48, org.springframework.test.context.support.DirtiesContextTestExecutionListener@28941a68, org.springframework.test.context.transaction.TransactionalTestExecutionListener@24ce5d4c, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@24fc9aa5, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@7369208e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@7ba623d1, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@2d5435d4, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@6dbdbb69, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@576a8b00]

  Scenario: Normal user asks for transactions                               # src/test/resources/features/transaction.feature:8
2019-02-21 14:08:47.867  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:47.867  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:47.870  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: COMMITTED
2019-02-21 14:08:47.870  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:47.870  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:47.872  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: COMMITTED
2019-02-21 14:08:47.873  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:47.873  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:47.876  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: COMMITTED
2019-02-21 14:08:47.876  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:47.876  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:47.878  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: COMMITTED
2019-02-21 14:08:47.879  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:47.879  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:47.882  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: COMMITTED
    Given that 5 transactions exists for account 1234 with status COMMITTED # TransactionStepDefinitions.that_transactions_exists_for_account_with_status(Integer,String,String)
2019-02-21 14:08:47.883  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
    When user 2 asks for transaction for account 1234                       # TransactionStepDefinitions.user_asks_for_transaction_for_account(String,String)
    Then status 403 is returned                                             # TransactionStepDefinitions.status_is_returned(Integer)
2019-02-21 14:08:47.924  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions], using SpringBootContextLoader
2019-02-21 14:08:47.926  INFO 42987 --- [           main] o.s.t.c.support.AbstractContextLoader    : Could not detect default resource locations for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: no resource found for suffixes {-context.xml, Context.groovy}.
2019-02-21 14:08:47.927  INFO 42987 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: TransactionStepDefinitions does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2019-02-21 14:08:47.930  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.broome.micro.bank.transactionservice.TransactionServiceApplication for test class com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions
2019-02-21 14:08:47.932  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2019-02-21 14:08:47.932  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@64acf8d2, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@112a50a1, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@6258f9d1, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@3f31892e, org.springframework.test.context.support.DirtiesContextTestExecutionListener@3cd89c72, org.springframework.test.context.transaction.TransactionalTestExecutionListener@7fb46c10, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@5a079446, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@694c0ed1, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@118f2486, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@4d071e4b, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@2b441609, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@22f7bf36]

  Scenario: System user tries to create a transaction                                       # src/test/resources/features/transaction.feature:13
2019-02-21 14:08:47.949  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:47.982  INFO 42987 --- [o-auto-1-exec-4] c.b.m.b.t.c.TransactionController        : POST transaction
2019-02-21 14:08:47.984  INFO 42987 --- [o-auto-1-exec-4] c.b.m.b.t.c.TransactionController        : isSystemUser
2019-02-21 14:08:47.984  INFO 42987 --- [o-auto-1-exec-4] c.b.m.b.t.services.TransactionService    : trying to add transaction from 1234 to 4321 with 123
2019-02-21 14:08:47.985  INFO 42987 --- [o-auto-1-exec-4] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:123 
2019-02-21 14:08:47.986  INFO 42987 --- [o-auto-1-exec-4] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:47.991  INFO 42987 --- [o-auto-1-exec-4] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
    When system user creates a transaction between account 1234 and account 4321            # TransactionStepDefinitions.system_user_creates_a_transaction_between_account_and_account(String,String)
2019-02-21 14:08:48.002  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.007  INFO 42987 --- [o-auto-1-exec-5] c.b.m.b.t.services.TransactionService    : Searching for transaction for account 1234
2019-02-21 14:08:48.009  INFO 42987 --- [o-auto-1-exec-5] c.b.m.b.t.services.TransactionService    : YFound 1 (1+0)transaction for account "1234"
2019-02-21 14:08:48.027  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : Transaction from 1234 transaction to 4321 transactionid
    Then 1 transaction exists for account 1234 with status PENDING and type CardTransaction # TransactionStepDefinitions.transaction_exists_for_account_with_status_PENDING(Integer,String,String,String)
2019-02-21 14:08:48.029  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.036  INFO 42987 --- [o-auto-1-exec-6] c.b.m.b.t.services.TransactionService    : Searching for transaction for account 4321
2019-02-21 14:08:48.039  INFO 42987 --- [o-auto-1-exec-6] c.b.m.b.t.services.TransactionService    : YFound 1 (0+1)transaction for account "4321"
2019-02-21 14:08:48.042  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : Transaction from 1234 transaction to 4321 transactionid
    And 1 transaction exists for account 4321 with status PENDING and type CardTransaction  # TransactionStepDefinitions.transaction_exists_for_account_with_status_PENDING(Integer,String,String,String)
2019-02-21 14:08:48.043  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions], using SpringBootContextLoader
2019-02-21 14:08:48.044  INFO 42987 --- [           main] o.s.t.c.support.AbstractContextLoader    : Could not detect default resource locations for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: no resource found for suffixes {-context.xml, Context.groovy}.
2019-02-21 14:08:48.045  INFO 42987 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: TransactionStepDefinitions does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2019-02-21 14:08:48.047  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.broome.micro.bank.transactionservice.TransactionServiceApplication for test class com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions
2019-02-21 14:08:48.050  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2019-02-21 14:08:48.050  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@145ef9e8, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@2e667e95, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@514b247b, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@66b62ebd, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5440a3a, org.springframework.test.context.transaction.TransactionalTestExecutionListener@18cb4ed1, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@10abd94f, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@47bfde21, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@628f0936, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@20706e70, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@6e5fba90, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@57283fac]

  Scenario: Normal user tries to create a transaction                       # src/test/resources/features/transaction.feature:18
2019-02-21 14:08:48.068  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.081  INFO 42987 --- [o-auto-1-exec-7] c.b.m.b.t.c.TransactionController        : POST transaction
    When user 2 creates a transaction between account 1234 and account 4321 # TransactionStepDefinitions.user_creates_a_transaction_between_account_and_account(String,String,String)
    Then status 403 is returned                                             # TransactionStepDefinitions.status_is_returned(Integer)
2019-02-21 14:08:48.090  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions], using SpringBootContextLoader
2019-02-21 14:08:48.091  INFO 42987 --- [           main] o.s.t.c.support.AbstractContextLoader    : Could not detect default resource locations for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: no resource found for suffixes {-context.xml, Context.groovy}.
2019-02-21 14:08:48.092  INFO 42987 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: TransactionStepDefinitions does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2019-02-21 14:08:48.094  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.broome.micro.bank.transactionservice.TransactionServiceApplication for test class com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions
2019-02-21 14:08:48.096  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2019-02-21 14:08:48.096  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3f5f79d8, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5dc1597f, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@11896af6, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6b6e2c83, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2fbb098f, org.springframework.test.context.transaction.TransactionalTestExecutionListener@7866a7a6, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@2262bc86, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@3872867d, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@4f72078d, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@2e4d252, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@3555d804, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@19b8f1bd]

  Scenario: System user tries commit transactions                                             # src/test/resources/features/transaction.feature:22
2019-02-21 14:08:48.105  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:48.106  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:48.109  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
2019-02-21 14:08:48.109  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:48.109  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:48.112  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
2019-02-21 14:08:48.114  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:48.114  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:48.116  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
2019-02-21 14:08:48.117  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:48.117  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:48.120  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
2019-02-21 14:08:48.121  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:48.121  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:48.125  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
    Given that 5 transactions exists for account 1234 with status PENDING                     # TransactionStepDefinitions.that_transactions_exists_for_account_with_status(Integer,String,String)
2019-02-21 14:08:48.126  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
    When system user commits transactions for account 1234                                    # TransactionStepDefinitions.system_user_commits_transactions_for_account(String)
2019-02-21 14:08:48.174  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.179  INFO 42987 --- [o-auto-1-exec-9] c.b.m.b.t.services.TransactionService    : Searching for transaction for account 1234
2019-02-21 14:08:48.185  INFO 42987 --- [o-auto-1-exec-9] c.b.m.b.t.services.TransactionService    : YFound 5 (5+0)transaction for account "1234"
2019-02-21 14:08:48.196  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : Transaction from 1234 transaction to 4321 transactionid
2019-02-21 14:08:48.197  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : Transaction from 1234 transaction to 4321 transactionid
2019-02-21 14:08:48.197  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : Transaction from 1234 transaction to 4321 transactionid
2019-02-21 14:08:48.197  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : Transaction from 1234 transaction to 4321 transactionid
2019-02-21 14:08:48.197  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : Transaction from 1234 transaction to 4321 transactionid
    Then 5 transaction exists for account 1234 with status COMMITTED and type CardTransaction # TransactionStepDefinitions.transaction_exists_for_account_with_status_PENDING(Integer,String,String,String)
2019-02-21 14:08:48.198  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions], using SpringBootContextLoader
2019-02-21 14:08:48.199  INFO 42987 --- [           main] o.s.t.c.support.AbstractContextLoader    : Could not detect default resource locations for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: no resource found for suffixes {-context.xml, Context.groovy}.
2019-02-21 14:08:48.200  INFO 42987 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: TransactionStepDefinitions does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2019-02-21 14:08:48.205  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.broome.micro.bank.transactionservice.TransactionServiceApplication for test class com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions
2019-02-21 14:08:48.207  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2019-02-21 14:08:48.207  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@7699e60a, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@5bbc033f, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@734a2c17, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@2d1f9ec3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@148f94dc, org.springframework.test.context.transaction.TransactionalTestExecutionListener@2f11d889, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@d1973e8, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@5ca10d0e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@34604b32, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@159408a7, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@5354bfce, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@74901d7]

  Scenario: Normal user tries to commit transactions                                         # src/test/resources/features/transaction.feature:27
2019-02-21 14:08:48.226  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:48.226  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:48.229  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
2019-02-21 14:08:48.230  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:48.231  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:48.234  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
2019-02-21 14:08:48.234  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:48.235  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:48.237  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
2019-02-21 14:08:48.239  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:48.240  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:48.244  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
2019-02-21 14:08:48.245  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:15 
2019-02-21 14:08:48.245  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:48.248  INFO 42987 --- [           main] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
    Given that 5 transactions exists for account 1234 with status PENDING                    # TransactionStepDefinitions.that_transactions_exists_for_account_with_status(Integer,String,String)
2019-02-21 14:08:48.249  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
    When user 2 commits transactions for account 1234                                        # TransactionStepDefinitions.user_commits_transactions_for_account(String,String)
    Then status 403 is returned                                                              # TransactionStepDefinitions.status_is_returned(Integer)
2019-02-21 14:08:48.261  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.266  INFO 42987 --- [o-auto-1-exec-1] c.b.m.b.t.services.TransactionService    : Searching for transaction for account 1234
2019-02-21 14:08:48.270  INFO 42987 --- [o-auto-1-exec-1] c.b.m.b.t.services.TransactionService    : YFound 5 (5+0)transaction for account "1234"
    And 0 transaction exists for account 1234 with status COMMITTED and type CardTransaction # TransactionStepDefinitions.transaction_exists_for_account_with_status_PENDING(Integer,String,String,String)
2019-02-21 14:08:48.276  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions], using SpringBootContextLoader
2019-02-21 14:08:48.277  INFO 42987 --- [           main] o.s.t.c.support.AbstractContextLoader    : Could not detect default resource locations for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: no resource found for suffixes {-context.xml, Context.groovy}.
2019-02-21 14:08:48.277  INFO 42987 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: TransactionStepDefinitions does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2019-02-21 14:08:48.281  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.broome.micro.bank.transactionservice.TransactionServiceApplication for test class com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions
2019-02-21 14:08:48.283  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2019-02-21 14:08:48.284  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@141eb85b, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7d432bc0, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@6b04689e, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@4be5b9b1, org.springframework.test.context.support.DirtiesContextTestExecutionListener@2ad80cf6, org.springframework.test.context.transaction.TransactionalTestExecutionListener@4e212f46, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@629fe84, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@6067e7c1, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@ab2e887, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@4daead88, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@43aa767, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@5b3c11ce]

  Scenario: System user tries to create a transaction when its not allowed                   # src/test/resources/features/transaction.feature:33
2019-02-21 14:08:48.299  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.311  INFO 42987 --- [o-auto-1-exec-2] c.b.m.b.t.c.TransactionController        : POST transaction
2019-02-21 14:08:48.313  INFO 42987 --- [o-auto-1-exec-2] c.b.m.b.t.c.TransactionController        : isSystemUser
2019-02-21 14:08:48.313  INFO 42987 --- [o-auto-1-exec-2] c.b.m.b.t.services.TransactionService    : trying to add transaction from 0000 to 4321 with 123
2019-02-21 14:08:48.314  INFO 42987 --- [o-auto-1-exec-2] c.b.m.b.t.services.TransactionService    : authorize transaction from 0000 to 4321 with:123 
2019-02-21 14:08:48.314  INFO 42987 --- [o-auto-1-exec-2] c.b.m.b.t.services.TransactionService    : Authorized: false
2019-02-21 14:08:48.314  INFO 42987 --- [o-auto-1-exec-2] c.b.m.b.t.services.TransactionService    : transaction is not allowd
    When system user creates a transaction between invalid account 0000 and account 4321     # TransactionStepDefinitions.system_user_creates_a_type_transaction_between_invalid_account_and_account(String,String)
2019-02-21 14:08:48.317  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.322  INFO 42987 --- [o-auto-1-exec-3] c.b.m.b.t.services.TransactionService    : Searching for transaction for account 0000
2019-02-21 14:08:48.324  INFO 42987 --- [o-auto-1-exec-3] c.b.m.b.t.services.TransactionService    : YFound 0 (0+0)transaction for account "0000"
    Then 0 transaction exists for account 0000 with status PENDING and type CardTransaction  # TransactionStepDefinitions.transaction_exists_for_account_with_status_PENDING(Integer,String,String,String)
2019-02-21 14:08:48.327  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.332  INFO 42987 --- [o-auto-1-exec-4] c.b.m.b.t.services.TransactionService    : Searching for transaction for account 0000
2019-02-21 14:08:48.334  INFO 42987 --- [o-auto-1-exec-4] c.b.m.b.t.services.TransactionService    : YFound 0 (0+0)transaction for account "0000"
    And 0 transaction exists for account 0000 with status COMMITTED and type CardTransaction # TransactionStepDefinitions.transaction_exists_for_account_with_status_PENDING(Integer,String,String,String)
2019-02-21 14:08:48.337  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions], using SpringBootContextLoader
2019-02-21 14:08:48.338  INFO 42987 --- [           main] o.s.t.c.support.AbstractContextLoader    : Could not detect default resource locations for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: no resource found for suffixes {-context.xml, Context.groovy}.
2019-02-21 14:08:48.338  INFO 42987 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: TransactionStepDefinitions does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2019-02-21 14:08:48.343  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.broome.micro.bank.transactionservice.TransactionServiceApplication for test class com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions
2019-02-21 14:08:48.345  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2019-02-21 14:08:48.345  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3891b430, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@769f6023, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@38a61c81, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@2f03fdc0, org.springframework.test.context.support.DirtiesContextTestExecutionListener@1a06ec24, org.springframework.test.context.transaction.TransactionalTestExecutionListener@1715193f, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1f5f4d48, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@2f025e9e, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@2c8e096, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@3dabdd11, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@587bf2e1, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@6530a1de]

  Scenario: System user tries to create a transaction with type CardTransaction                       # src/test/resources/features/transaction.feature:38
2019-02-21 14:08:48.359  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.368  INFO 42987 --- [o-auto-1-exec-5] c.b.m.b.t.c.TransactionController        : POST transaction
2019-02-21 14:08:48.370  INFO 42987 --- [o-auto-1-exec-5] c.b.m.b.t.c.TransactionController        : isSystemUser
2019-02-21 14:08:48.370  INFO 42987 --- [o-auto-1-exec-5] c.b.m.b.t.services.TransactionService    : trying to add transaction from 1234 to 4321 with 123
2019-02-21 14:08:48.371  INFO 42987 --- [o-auto-1-exec-5] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:123 
2019-02-21 14:08:48.371  INFO 42987 --- [o-auto-1-exec-5] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:48.373  INFO 42987 --- [o-auto-1-exec-5] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
    When system user creates a CardTransaction type transaction between account 1234 and account 4321 # TransactionStepDefinitions.system_user_creates_a_CARDPAYMENT_type_transaction_between_account_and_account(String,String,String)
2019-02-21 14:08:48.376  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.381  INFO 42987 --- [o-auto-1-exec-6] c.b.m.b.t.services.TransactionService    : Searching for transaction for account 1234
2019-02-21 14:08:48.383  INFO 42987 --- [o-auto-1-exec-6] c.b.m.b.t.services.TransactionService    : YFound 1 (1+0)transaction for account "1234"
2019-02-21 14:08:48.385  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : Transaction from 1234 transaction to 4321 transactionid
    Then 1 transaction exists for account 1234 with status PENDING and type CardTransaction           # TransactionStepDefinitions.transaction_exists_for_account_with_status_PENDING(Integer,String,String,String)
2019-02-21 14:08:48.387  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.391  INFO 42987 --- [o-auto-1-exec-7] c.b.m.b.t.services.TransactionService    : Searching for transaction for account 4321
2019-02-21 14:08:48.393  INFO 42987 --- [o-auto-1-exec-7] c.b.m.b.t.services.TransactionService    : YFound 1 (0+1)transaction for account "4321"
2019-02-21 14:08:48.395  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : Transaction from 1234 transaction to 4321 transactionid
    And 1 transaction exists for account 4321 with status PENDING and type CardTransaction            # TransactionStepDefinitions.transaction_exists_for_account_with_status_PENDING(Integer,String,String,String)
2019-02-21 14:08:48.397  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions], using SpringBootContextLoader
2019-02-21 14:08:48.398  INFO 42987 --- [           main] o.s.t.c.support.AbstractContextLoader    : Could not detect default resource locations for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: no resource found for suffixes {-context.xml, Context.groovy}.
2019-02-21 14:08:48.398  INFO 42987 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions]: TransactionStepDefinitions does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2019-02-21 14:08:48.401  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.broome.micro.bank.transactionservice.TransactionServiceApplication for test class com.broome.micro.bank.transactionservice.cucumber.steps.TransactionStepDefinitions
2019-02-21 14:08:48.403  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2019-02-21 14:08:48.403  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@13868c41, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@67d55a46, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@72115c48, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1d982fbe, org.springframework.test.context.support.DirtiesContextTestExecutionListener@3adb4cc8, org.springframework.test.context.transaction.TransactionalTestExecutionListener@779136bf, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@f9ac719, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@53a3fc8b, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@337e573b, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@4d24ab25, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@145f1f97, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@58d4fe33]

  Scenario: System user tries to create a transaction with type TransferTransaction                       # src/test/resources/features/transaction.feature:43
2019-02-21 14:08:48.413  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.424  INFO 42987 --- [o-auto-1-exec-8] c.b.m.b.t.c.TransactionController        : POST transaction
2019-02-21 14:08:48.426  INFO 42987 --- [o-auto-1-exec-8] c.b.m.b.t.c.TransactionController        : isSystemUser
2019-02-21 14:08:48.427  INFO 42987 --- [o-auto-1-exec-8] c.b.m.b.t.services.TransactionService    : trying to add transaction from 1234 to 4321 with 123
2019-02-21 14:08:48.427  INFO 42987 --- [o-auto-1-exec-8] c.b.m.b.t.services.TransactionService    : authorize transaction from 1234 to 4321 with:123 
2019-02-21 14:08:48.428  INFO 42987 --- [o-auto-1-exec-8] c.b.m.b.t.services.TransactionService    : Authorized: true
2019-02-21 14:08:48.431  INFO 42987 --- [o-auto-1-exec-8] c.b.m.b.t.services.TransactionService    : Transaction completed with status: PENDING
    When system user creates a TransferTransaction type transaction between account 1234 and account 4321 # TransactionStepDefinitions.system_user_creates_a_CARDPAYMENT_type_transaction_between_account_and_account(String,String,String)
2019-02-21 14:08:48.433  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.438  INFO 42987 --- [o-auto-1-exec-9] c.b.m.b.t.services.TransactionService    : Searching for transaction for account 1234
2019-02-21 14:08:48.442  INFO 42987 --- [o-auto-1-exec-9] c.b.m.b.t.services.TransactionService    : YFound 1 (1+0)transaction for account "1234"
2019-02-21 14:08:48.445  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : Transaction from 1234 transaction to 4321 transactionid
    Then 1 transaction exists for account 1234 with status PENDING and type TransferTransaction           # TransactionStepDefinitions.transaction_exists_for_account_with_status_PENDING(Integer,String,String,String)
2019-02-21 14:08:48.446  INFO 42987 --- [           main] c.b.m.b.t.base.BaseIntegrationTest       : PORT: 50737
2019-02-21 14:08:48.450  INFO 42987 --- [-auto-1-exec-10] c.b.m.b.t.services.TransactionService    : Searching for transaction for account 4321
2019-02-21 14:08:48.453  INFO 42987 --- [-auto-1-exec-10] c.b.m.b.t.services.TransactionService    : YFound 1 (0+1)transaction for account "4321"
2019-02-21 14:08:48.455  INFO 42987 --- [           main] c.b.m.b.t.c.s.TransactionStepDefinitions : Transaction from 1234 transaction to 4321 transactionid
    And 1 transaction exists for account 4321 with status PENDING and type TransferTransaction            # TransactionStepDefinitions.transaction_exists_for_account_with_status_PENDING(Integer,String,String,String)

9 Scenarios (9 passed)
27 Steps (27 passed)
0m16.531s

[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 17.271 s - in com.broome.micro.bank.transactionservice.cucumber.TransactionCucumberIntegrationTest
[INFO] Running com.broome.micro.bank.transactionservice.TransactionServiceApplicationTests
2019-02-21 14:08:48.484  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.broome.micro.bank.transactionservice.TransactionServiceApplicationTests], using SpringBootContextLoader
2019-02-21 14:08:48.486  INFO 42987 --- [           main] o.s.t.c.support.AbstractContextLoader    : Could not detect default resource locations for test class [com.broome.micro.bank.transactionservice.TransactionServiceApplicationTests]: no resource found for suffixes {-context.xml, Context.groovy}.
2019-02-21 14:08:48.486  INFO 42987 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.broome.micro.bank.transactionservice.TransactionServiceApplicationTests]: TransactionServiceApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2019-02-21 14:08:48.494  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.broome.micro.bank.transactionservice.TransactionServiceApplication for test class com.broome.micro.bank.transactionservice.TransactionServiceApplicationTests
2019-02-21 14:08:48.496  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
2019-02-21 14:08:48.497  INFO 42987 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@7657d29f, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@6ace3, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@d3b0397, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@1ab717f3, org.springframework.test.context.support.DirtiesContextTestExecutionListener@52bcfd10, org.springframework.test.context.transaction.TransactionalTestExecutionListener@67683210, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@329aa2d1, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@103033fe, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@25511895, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@38f569d, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@6464f017, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@755a90a6]
2019-02-21 14:08:48.628  INFO 42987 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration' of type [org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration$$EnhancerBySpringCGLIB$$2e2270ec] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.1.2.RELEASE)

2019-02-21 14:08:48.715  INFO 42987 --- [           main] m.b.t.TransactionServiceApplicationTests : No active profile set, falling back to default profiles: default
2019-02-21 14:08:49.276  INFO 42987 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data repositories in DEFAULT mode.
2019-02-21 14:08:49.291  INFO 42987 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14ms. Found 1 repository interfaces.
2019-02-21 14:08:49.386  INFO 42987 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=329b0888-af66-3669-8bd1-d07244be2e2c
2019-02-21 14:08:49.480  INFO 42987 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$12086def] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-02-21 14:08:49.513  INFO 42987 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration' of type [org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration$$EnhancerBySpringCGLIB$$2e2270ec] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-02-21 14:08:49.651  INFO 42987 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2019-02-21 14:08:49.656  INFO 42987 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2019-02-21 14:08:49.698  INFO 42987 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2019-02-21 14:08:49.708  INFO 42987 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
2019-02-21 14:08:49.750  INFO 42987 --- [           main] o.h.t.schema.internal.SchemaCreatorImpl  : HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@563263a'
2019-02-21 14:08:49.751  INFO 42987 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2019-02-21 14:08:50.394  WARN 42987 --- [           main] o.s.c.n.a.ArchaiusAutoConfiguration      : Netflix ConfigurationManager has already been installed, unable to re-install
2019-02-21 14:08:50.674  INFO 42987 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-02-21 14:08:50.701  WARN 42987 --- [           main] aWebConfiguration$JpaWebMvcConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2019-02-21 14:08:51.567  INFO 42987 --- [           main] m.b.t.TransactionServiceApplicationTests : Started TransactionServiceApplicationTests in 3.053 seconds (JVM running for 20.707)
[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.897 s - in com.broome.micro.bank.transactionservice.TransactionServiceApplicationTests
[INFO] Running com.broome.micro.bank.transactionservice.base.TransactionIntegrationTest
[WARNING] Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.003 s - in com.broome.micro.bank.transactionservice.base.TransactionIntegrationTest
2019-02-21 14:08:51.703  INFO 42987 --- [       Thread-7] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TRANSACTION-SERVICE with eureka with status DOWN
2019-02-21 14:08:51.704  WARN 42987 --- [       Thread-7] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1550754531704, current=DOWN, previous=UP]
2019-02-21 14:08:51.705  INFO 42987 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TRANSACTION-SERVICE/192.168.43.177:transaction-service:0: registering service...
2019-02-21 14:08:51.714  INFO 42987 --- [       Thread-7] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-02-21 14:08:51.716  INFO 42987 --- [nfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TRANSACTION-SERVICE/192.168.43.177:transaction-service:0 - registration status: 204
2019-02-21 14:08:51.726  INFO 42987 --- [      Thread-12] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2019-02-21 14:08:51.729  INFO 42987 --- [       Thread-7] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2019-02-21 14:08:51.729  INFO 42987 --- [       Thread-7] .SchemaDropperImpl$DelayedDropActionImpl : HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2019-02-21 14:08:51.730  INFO 42987 --- [      Thread-12] o.s.c.n.e.s.EurekaServiceRegistry        : Unregistering application TRANSACTION-SERVICE with eureka with status DOWN
2019-02-21 14:08:51.736  INFO 42987 --- [      Thread-12] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-02-21 14:08:51.740  INFO 42987 --- [       Thread-7] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-197]
2019-02-21 14:08:51.740  INFO 42987 --- [      Thread-12] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2019-02-21 14:08:51.741  INFO 42987 --- [      Thread-12] .SchemaDropperImpl$DelayedDropActionImpl : HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2019-02-21 14:08:51.741  INFO 42987 --- [       Thread-7] com.netflix.discovery.DiscoveryClient    : Shutting down DiscoveryClient ...
2019-02-21 14:08:51.748  INFO 42987 --- [      Thread-12] o.s.b.f.support.DisposableBeanAdapter    : Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-197]
2019-02-21 14:08:51.749  INFO 42987 --- [      Thread-12] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2019-02-21 14:08:51.754  INFO 42987 --- [      Thread-12] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2019-02-21 14:08:54.748  INFO 42987 --- [       Thread-7] com.netflix.discovery.DiscoveryClient    : Unregistering ...
2019-02-21 14:08:54.759  INFO 42987 --- [       Thread-7] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_TRANSACTION-SERVICE/192.168.43.177:transaction-service:0 - deregister  status: 200
2019-02-21 14:08:54.811  INFO 42987 --- [       Thread-7] com.netflix.discovery.DiscoveryClient    : Completed shut down of DiscoveryClient
2019-02-21 14:08:54.813  INFO 42987 --- [       Thread-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2019-02-21 14:08:54.817  INFO 42987 --- [       Thread-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
[INFO] 
[INFO] Results:
[INFO] 
[WARNING] Tests run: 11, Failures: 0, Errors: 0, Skipped: 1
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 32.619 s
[INFO] Finished at: 2019-02-21T14:08:57+01:00
[INFO] ------------------------------------------------------------------------
